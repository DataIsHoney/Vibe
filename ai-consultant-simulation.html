<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Consultant Simulation - RetailCo Customer Churn Project</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-blue: #2563eb;
            --primary-dark: #1e40af;
            --accent-purple: #7c3aed;
            --success-green: #10b981;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-light: #f1f5f9;
            --text-muted: #94a3b8;
        }

        body {
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1a1f3a 100%);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-2px);
            border-color: rgba(148, 163, 184, 0.4);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .character-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border: 3px solid var(--primary-blue);
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
        }

        .chat-bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            margin-bottom: 12px;
            animation: slideIn 0.3s ease;
        }

        .chat-bubble.user {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-dark));
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .chat-bubble.character {
            background: var(--bg-card);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-bottom-left-radius: 4px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 0.875rem;
        }

        .data-table th {
            background: rgba(37, 99, 235, 0.2);
            padding: 8px;
            text-align: left;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        .data-table td {
            padding: 8px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .data-table tr:hover {
            background: rgba(148, 163, 184, 0.1);
        }

        .highlight-red { color: #ef4444; font-weight: bold; }
        .highlight-green { color: #10b981; font-weight: bold; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-dark));
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4);
        }

        .btn-secondary {
            background: rgba(148, 163, 184, 0.2);
            color: var(--text-light);
            padding: 10px 20px;
            border-radius: 8px;
            border: 1px solid rgba(148, 163, 184, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(148, 163, 184, 0.3);
        }

        .topic-btn {
            background: rgba(124, 58, 237, 0.2);
            border: 1px solid var(--accent-purple);
            color: var(--text-light);
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .topic-btn:hover {
            background: rgba(124, 58, 237, 0.3);
            border-color: var(--accent-purple);
            transform: translateX(5px);
        }

        .hidden { display: none !important; }

        .chat-container {
            max-height: 600px;
            overflow-y: auto;
            padding: 20px;
        }

        .chat-container::-webkit-scrollbar { width: 8px; }
        .chat-container::-webkit-scrollbar-track { background: rgba(148, 163, 184, 0.1); border-radius: 4px; }
        .chat-container::-webkit-scrollbar-thumb { background: rgba(148, 163, 184, 0.3); border-radius: 4px; }

        .concept-tag {
            background: rgba(124, 58, 237, 0.2);
            border: 1px solid var(--accent-purple);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            display: inline-block;
            margin: 2px;
        }
    </style>
</head>
<body class="p-4">
    <header class="mb-8">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-4xl font-bold mb-2">üéØ AI Consultant Simulation</h1>
            <p class="text-lg" style="color: var(--text-muted)">RetailCo Customer Churn Prediction Project</p>
        </div>
    </header>

    <div class="max-w-7xl mx-auto">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="glass-card p-8">
            <h2 class="text-3xl font-bold mb-4">Welcome, AI Consultant! üëã</h2>
            <p class="text-lg mb-4" style="color: var(--text-muted)">
                <strong>RetailCo</strong> is losing 23% of their customers quarterly. They need your help to build an
                <strong>AI-powered customer churn prediction system</strong>.
            </p>
            <div class="glass-card p-6 mb-6" style="background: rgba(239, 68, 68, 0.1);">
                <h3 class="text-xl font-semibold mb-2">üìâ The Challenge:</h3>
                <p style="color: var(--text-muted)">
                    Customer acquisition costs $150 per customer, but retention interventions cost only $20.
                    Predicting churn could save millions. You'll consult with 5 experts to design and deploy this AI solution.
                </p>
            </div>
            <div class="bg-purple-900 bg-opacity-30 p-4 rounded-lg mb-6">
                <h3 class="text-lg font-semibold mb-2">‚ú® AI Concepts You'll Learn:</h3>
                <div class="flex flex-wrap gap-2">
                    <span class="concept-tag">ML Types</span>
                    <span class="concept-tag">Data Analysis</span>
                    <span class="concept-tag">Feature Engineering</span>
                    <span class="concept-tag">Model Evaluation</span>
                    <span class="concept-tag">Prompt Engineering</span>
                    <span class="concept-tag">Agentic Patterns</span>
                    <span class="concept-tag">Deployment</span>
                </div>
            </div>
            <button class="btn-primary text-lg" onclick="showCharacters()">Start Consulting üöÄ</button>
        </div>

        <!-- Character Selection -->
        <div id="character-selection" class="hidden">
            <div class="mb-6">
                <h2 class="text-2xl font-bold mb-2">Choose an Expert to Consult</h2>
                <p style="color: var(--text-muted)">Talk to any expert in any order. Each brings unique insights to the project.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="character-grid"></div>
            <div class="mt-6">
                <button class="btn-secondary" onclick="showDashboard()">üìä View Learning Dashboard</button>
            </div>
        </div>

        <!-- Chat Interface -->
        <div id="chat-interface" class="hidden">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6 pb-4 border-b border-gray-600 flex-wrap gap-4">
                    <div class="flex items-center gap-4">
                        <div class="character-avatar" id="chat-avatar"></div>
                        <div>
                            <h3 class="text-2xl font-bold" id="chat-character-name"></h3>
                            <p style="color: var(--text-muted)" id="chat-character-role"></p>
                        </div>
                    </div>
                    <button class="btn-secondary" onclick="backToCharacters()">‚Üê Back to Team</button>
                </div>

                <div class="chat-container glass-card mb-4" id="chat-messages"></div>

                <div id="topic-selection" class="mb-4">
                    <p class="text-sm font-semibold mb-3">üí¨ What would you like to discuss?</p>
                    <div id="topics-container" class="space-y-2"></div>
                </div>

                <div class="mt-4 p-4 glass-card">
                    <p class="text-sm font-semibold mb-2">üí° Concepts Learned:</p>
                    <div id="learned-concepts" class="flex flex-wrap gap-2"></div>
                </div>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="hidden glass-card p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">üìä Learning Dashboard</h2>
                <button class="btn-secondary" onclick="backToCharacters()">‚Üê Back</button>
            </div>
            <div class="glass-card p-4 mb-4">
                <h3 class="text-xl font-semibold mb-3">AI Concepts Mastered</h3>
                <div id="concepts-list" class="flex flex-wrap gap-2"></div>
            </div>
            <div class="glass-card p-4">
                <h3 class="text-xl font-semibold mb-3">Experts Consulted</h3>
                <div id="experts-list"></div>
            </div>
        </div>
    </div>

    <script>
        // ===== DATA =====
        const characters = {
            sarah: {
                id: 'sarah',
                name: 'Sarah Chen',
                role: 'CEO & Strategy Lead',
                emoji: 'üë©‚Äçüíº',
                description: 'Defines business value and AI strategy',
                topics: [
                    { id: 'ml_types', title: 'What types of machine learning exist?', concepts: ['Supervised Learning', 'Unsupervised Learning', 'Reinforcement Learning'] },
                    { id: 'business_value', title: 'How do we prove ROI for AI projects?', concepts: ['Business Value', 'ROI Analysis'] },
                    { id: 'framing', title: 'How do we frame this as an ML problem?', concepts: ['Problem Framing', 'Classification'] }
                ]
            },
            david: {
                id: 'david',
                name: 'David Kim',
                role: 'Data Scientist',
                emoji: 'üë®‚Äçüíª',
                description: 'Analyzes data and builds features',
                topics: [
                    { id: 'data_analysis', title: 'Show me the customer data', concepts: ['Data Analysis', 'Pattern Recognition'] },
                    { id: 'features', title: 'What is feature engineering?', concepts: ['Feature Engineering', 'RFM Analysis'] },
                    { id: 'data_quality', title: 'How do we handle messy data?', concepts: ['Data Quality', 'Data Cleaning'] }
                ]
            },
            marcus: {
                id: 'marcus',
                name: 'Marcus Johnson',
                role: 'ML Engineer',
                emoji: 'üë®‚Äçüîß',
                description: 'Trains and evaluates models',
                topics: [
                    { id: 'training', title: 'How do we train a churn model?', concepts: ['Model Training', 'Train/Test Split'] },
                    { id: 'evaluation', title: 'How do we measure model performance?', concepts: ['Precision', 'Recall', 'Confusion Matrix', 'F1-Score'] },
                    { id: 'tradeoffs', title: 'Precision vs Recall - which matters more?', concepts: ['Evaluation Metrics', 'Business Tradeoffs'] }
                ]
            },
            elena: {
                id: 'elena',
                name: 'Elena Rodriguez',
                role: 'AI Architect',
                emoji: 'üë©‚Äçüíª',
                description: 'Designs AI agents and prompts',
                topics: [
                    { id: 'prompts', title: 'What is prompt engineering?', concepts: ['Prompt Engineering', 'Context Design'] },
                    { id: 'agents', title: 'How do AI agents work?', concepts: ['Agentic Patterns', 'ReAct Pattern'] },
                    { id: 'context', title: 'What context does an AI agent need?', concepts: ['Context Engineering', 'Agent Design'] }
                ]
            },
            jasmine: {
                id: 'jasmine',
                name: 'Jasmine Patel',
                role: 'Product Manager',
                emoji: 'üë©‚Äçüíº',
                description: 'Manages deployment and monitoring',
                topics: [
                    { id: 'deployment', title: 'How do we deploy this safely?', concepts: ['Model Deployment', 'Staged Rollout'] },
                    { id: 'testing', title: 'What is A/B testing?', concepts: ['A/B Testing', 'Experimentation'] },
                    { id: 'monitoring', title: 'How do we monitor AI in production?', concepts: ['Model Monitoring', 'Data Drift', 'Human-AI Collaboration'] }
                ]
            }
        };

        const responses = {
            // Sarah's responses
            ml_types: `Great question! There are three main types of machine learning:

**üéØ Supervised Learning** - Learning from labeled examples
‚Ä¢ Like teaching with flashcards: "This customer churned" vs "This customer stayed"
‚Ä¢ The AI learns patterns from known outcomes to predict new cases
‚Ä¢ Examples: Churn prediction, spam detection, price forecasting
‚Ä¢ **This is what we need for RetailCo!**

**üîç Unsupervised Learning** - Finding hidden patterns without labels
‚Ä¢ Like organizing books without being told how - the AI finds natural groupings
‚Ä¢ Examples: Customer segmentation, anomaly detection
‚Ä¢ Useful: "Are there different types of churners we should treat differently?"

**üéÆ Reinforcement Learning** - Learning through trial and error with rewards
‚Ä¢ Like training a dog: reward good actions, discourage bad ones
‚Ä¢ Examples: Game AI, robotics, dynamic pricing
‚Ä¢ Could be useful later for optimizing retention offer amounts

For predicting churn, we want **supervised learning** because we have historical data showing which customers churned.`,

            business_value: `Excellent question! ROI is critical for getting buy-in. Here's how we calculate it:

**Cost of Doing Nothing:**
‚Ä¢ 23% churn rate √ó 8,500 customers = 1,955 lost customers/quarter
‚Ä¢ 1,955 √ó $450 lifetime value = **$879,750 lost quarterly**

**Cost of AI Solution:**
‚Ä¢ Model development: $50,000 (one-time)
‚Ä¢ AI agent system: $30,000 (one-time)
‚Ä¢ Ongoing maintenance: $5,000/quarter

**Benefit from AI:**
‚Ä¢ If we catch 85% of churners with targeted $20 retention offers:
‚Ä¢ Save: 1,955 √ó 0.85 = 1,662 customers
‚Ä¢ Revenue saved: 1,662 √ó $450 = $747,900
‚Ä¢ Cost of offers: 1,955 √ó $20 = $39,100
‚Ä¢ **Net benefit: $708,800 per quarter**

**ROI Calculation:**
‚Ä¢ First quarter: $708,800 - $80,000 = $628,800 profit
‚Ä¢ Quarters 2+: $703,800 profit each
‚Ä¢ **Payback period: 1.5 months!**

This is how we convince leadership!`,

            framing: `Perfect topic! Problem framing is crucial. Here's how we frame it:

**Business Problem:**
"Reduce customer churn by proactively identifying at-risk customers"

**ML Problem:**
"Binary classification: Will this customer churn in the next 90 days? (Yes/No)"

**Why This Framing Works:**
‚úÖ Clear outcome: Churn vs Active (binary)
‚úÖ Actionable timeframe: 90 days gives us time to intervene
‚úÖ Measurable: We can track accuracy, precision, recall
‚úÖ Historical data: We have 10,000 customers with known outcomes

**What We Need:**
‚Ä¢ Features (inputs): Purchase history, support tickets, demographics, engagement
‚Ä¢ Labels (outputs): Churned (1) or Active (0) after 90 days
‚Ä¢ Training data: 7,000 historical customers (70%)
‚Ä¢ Test data: 3,000 customers (30%) to validate model

**Key Decision:**
This is supervised classification, not regression (we're predicting a category, not a number).`,

            // David's responses
            data_analysis: `Let me show you a sample of our customer data:

<table class="data-table">
<tr><th>ID</th><th>Tenure</th><th>Monthly Purchases</th><th>Avg Order $</th><th>Support Tickets</th><th>Days Since Purchase</th><th>Status</th></tr>
<tr><td>C001</td><td>24 mo</td><td>4.2</td><td>$89</td><td>1</td><td>12</td><td class="highlight-green">Active</td></tr>
<tr><td>C002</td><td>6 mo</td><td>1.1</td><td>$45</td><td>5</td><td>67</td><td class="highlight-red">Churned</td></tr>
<tr><td>C003</td><td>36 mo</td><td>8.5</td><td>$156</td><td>0</td><td>5</td><td class="highlight-green">Active</td></tr>
<tr><td>C004</td><td>3 mo</td><td>0.8</td><td>$32</td><td>3</td><td>92</td><td class="highlight-red">Churned</td></tr>
<tr><td>C005</td><td>18 mo</td><td>3.1</td><td>$72</td><td>2</td><td>8</td><td class="highlight-green">Active</td></tr>
</table>

**What patterns do you see?**

**Churned customers:**
‚Ä¢ Shorter tenure (avg 4.2 months)
‚Ä¢ Fewer monthly purchases (1.1 vs 5.2)
‚Ä¢ More support tickets (4.8 vs 1.3)
‚Ä¢ Longer time since last purchase (83 vs 11 days)

**These differences are statistically significant!** They become our predictive features.`,

            features: `Feature engineering is creating new variables that help models learn better. Raw data alone isn't enough!

**Example: Raw Data**
‚Ä¢ Last purchase: 67 days ago
‚Ä¢ Total purchases: 8

**Engineered Features:**
‚Ä¢ **Purchase Recency Score:** 67 days ‚Üí Score 25/100 (recent = 100, old = 0)
‚Ä¢ **Purchase Frequency Trend:** Are they buying MORE or LESS lately?
‚Ä¢ **RFM Score:** Recency + Frequency + Monetary value combined
‚Ä¢ **Engagement Velocity:** Is engagement increasing or decreasing?
‚Ä¢ **Support Ticket Ratio:** Tickets per month of tenure
‚Ä¢ **High Value Flag:** Top 25% of customers by lifetime value

**Why This Matters:**
A model seeing "67 days since purchase" doesn't know if that's good or bad. But "Recency Score: 25/100" + "Trend: Declining" gives clear signals!

**Data Preparation is 70% of ML work.** Good features make all the difference between a mediocre model (65% accuracy) and a great one (85%+ accuracy).`,

            data_quality: `Data quality makes or breaks AI projects. Here's what we're dealing with:

**Common Issues in Our Data:**
‚Ä¢ **Missing values:** 12% of records missing "last purchase date"
‚Ä¢ **Duplicates:** Same customer with different spellings ("John Smith" vs "J. Smith")
‚Ä¢ **Inconsistent formats:** Dates as "MM/DD/YYYY" vs "YYYY-MM-DD"
‚Ä¢ **Outliers:** One customer with 847 purchases (data error?)
‚Ä¢ **Inconsistent categories:** "Electronics" vs "electronic" vs "tech"

**Our Cleaning Process:**
1. **Standardize:** Convert all dates to same format, lowercase all text
2. **De-duplicate:** Merge records using fuzzy matching on name + email
3. **Handle missing:** Use median for numeric, "unknown" category for text
4. **Validate:** Remove impossible values (negative purchases, future dates)
5. **Enrich:** Add derived features (tenure in months, days since last purchase)

**The Rule:**
"Garbage in, garbage out" - A model trained on messy data learns messy patterns. We spend more time on data prep than model building!`,

            // Marcus's responses
            training: `Here's how we train the churn prediction model:

**Step 1: Split the Data**
‚Ä¢ Training set (70%): 7,000 customers to learn patterns
‚Ä¢ Validation set (15%): 1,500 to tune hyperparameters
‚Ä¢ Test set (15%): 1,500 to evaluate final performance

**Why separate sets?** We need unseen data to test if the model generalizes vs memorizes.

**Step 2: Choose Algorithm**
I tested three approaches:
‚Ä¢ **Logistic Regression:** Simple, interpretable, fast (baseline)
‚Ä¢ **Random Forest:** Handles non-linear patterns, feature importance
‚Ä¢ **Neural Network:** Most powerful but "black box"

**Step 3: Train**
The model learns by finding patterns:
‚Ä¢ "When tenure < 6 months AND support tickets > 3 ‚Üí 78% churn risk"
‚Ä¢ "When monthly purchases declining AND high order value ‚Üí 45% churn risk"

**Step 4: Tune Hyperparameters**
Optimize settings on validation set:
‚Ä¢ How many trees in Random Forest?
‚Ä¢ How deep should each tree be?
‚Ä¢ What's the learning rate?

**Winner:** Random Forest with 100 trees, max depth 8 ‚Üí 83.2% F1-score!`,

            evaluation: `You can't just look at "accuracy"! Here's why and what to use instead:

**Why Accuracy is Misleading:**
Our data has 77% active customers, 23% churned. A dumb model that predicts "everyone stays" would be 77% accurate but **completely useless**!

**Better Metrics:**

<table class="data-table">
<tr><th></th><th>Predicted Stay</th><th>Predicted Churn</th></tr>
<tr><th>Actually Stayed (1,155)</th><td class="highlight-green">1,089 (TN)</td><td class="highlight-red">66 (FP)</td></tr>
<tr><th>Actually Churned (345)</th><td class="highlight-red">52 (FN)</td><td class="highlight-green">293 (TP)</td></tr>
</table>

**Precision:** 293/(293+66) = **81.6%**
‚Ä¢ When we predict churn, we're right 81.6% of the time
‚Ä¢ Low false positives = don't waste retention offers on loyal customers

**Recall:** 293/(293+52) = **84.9%**
‚Ä¢ We catch 84.9% of actual churners
‚Ä¢ Low false negatives = don't miss at-risk customers

**F1-Score:** Harmonic mean = **83.2%**
‚Ä¢ Balances precision and recall

Which matters more depends on business costs!`,

            tradeoffs: `This is where ML meets business! Every metric has tradeoffs.

**The Business Question:**
What's worse - missing a churner, or targeting a loyal customer?

**Cost Analysis:**
‚Ä¢ **False Negative (miss a churner):** Lose $450 in lifetime value
‚Ä¢ **False Positive (target loyal customer):** Waste $20 on unnecessary offer

**The Math:**
Missing one churner costs 22.5√ó more than one false alarm! So we optimize for **high recall** (catch as many churners as possible) even if it means more false positives.

**Our Model Performance:**
‚Ä¢ Catch 293 of 345 churners (84.9% recall) ‚Üí Save $131,850
‚Ä¢ Unnecessarily target 66 loyal customers ‚Üí Cost $1,320
‚Ä¢ **Net benefit: $130,530!**

**Model Tuning:**
We can adjust the "threshold" to trade precision for recall:
‚Ä¢ Threshold 0.3 (aggressive): 92% recall, 72% precision ‚Üí More false alarms
‚Ä¢ Threshold 0.5 (balanced): 85% recall, 82% precision ‚Üí Our choice
‚Ä¢ Threshold 0.7 (conservative): 76% recall, 91% precision ‚Üí Miss more churners

We chose 0.5 based on cost analysis. **Always tie metrics to business impact!**`,

            // Elena's responses
            prompts: `Prompt engineering is "programming with language" - guiding AI with well-crafted instructions.

**‚ùå Bad Prompt:**
"Write a retention email."

**Result:** Generic, boring, ineffective.

**‚úÖ Good Prompt:**
"You are a customer success specialist at RetailCo. Write a personalized retention email for:

Customer Profile:
- Name: Sarah Johnson
- Tenure: 6 months
- Last purchase: 67 days ago (previously monthly)
- Had 5 support tickets (avg is 1.2)
- Preferred eco-friendly products
- Churn risk: 87%

Constraints:
- Tone: Empathetic and solution-focused
- Offer: 20% discount + free premium shipping
- Length: 150-200 words
- Call-to-action: Reply to schedule call with specialist

Goal: Re-engage customer and identify pain points"

**Result:** Personalized, contextual, effective!

**Key Elements:**
1. **Role:** Who is the AI?
2. **Context:** What information is relevant?
3. **Task:** What exactly should it do?
4. **Constraints:** Format, tone, length limits
5. **Goal:** What outcome do we want?

Good prompts are the difference between mediocre AI and amazing AI!`,

            agents: `AI agents go beyond single responses - they take multi-step actions and adapt based on results!

**Traditional AI:** One question ‚Üí One answer

**AI Agent:** Autonomous workflow with reasoning and actions

**Example: ReAct Pattern** (Reasoning + Acting)

**Scenario:** Customer C002 (87% churn risk)

1. **Observe:** Review customer profile
2. **Reason:** "5 support tickets suggests product frustration"
3. **Act:** Send empathy email offering product upgrade
4. **Observe:** Email opened, no response after 3 days
5. **Reason:** "Customer engaged but needs stronger incentive"
6. **Act:** Escalate to human agent with 25% discount authority
7. **Observe:** Human agent spoke to customer, identified issue
8. **Act:** Process product replacement + apply discount
9. **Observe:** Customer re-purchased within 7 days
10. **Learn:** Save this pattern for similar cases

**The agent runs an entire retention campaign autonomously!**

Other patterns:
‚Ä¢ **Chain-of-Thought:** Break complex reasoning into steps
‚Ä¢ **Self-Reflection:** Agent reviews its own outputs
‚Ä¢ **Tool Use:** Agent can call APIs, query databases, send emails`,

            context: `Context is everything an AI needs to make good decisions. Garbage context = garbage decisions!

**For Our Retention Agent:**

**1. Customer Context**
‚Ä¢ Purchase history (frequency, recency, monetary)
‚Ä¢ Product preferences (categories, brands, price points)
‚Ä¢ Support history (tickets, issues, resolutions)
‚Ä¢ Engagement (email opens, website visits)
‚Ä¢ Demographics (age, location, customer type)

**2. Business Context**
‚Ä¢ Available offers (discounts, free shipping, upgrades)
‚Ä¢ Budget limits (max discount per customer)
‚Ä¢ Policy constraints (refund windows, terms)
‚Ä¢ Success patterns (what worked for similar customers)

**3. Real-Time Context**
‚Ä¢ Current churn risk score (0-100)
‚Ä¢ Recent trigger events (support ticket, complaint)
‚Ä¢ Competitive actions (did competitor launch promo?)
‚Ä¢ Seasonal factors (holiday season, end of quarter)

**4. Historical Context**
‚Ä¢ Previous retention attempts (don't repeat failed approaches)
‚Ä¢ Customer responses (email opens, call no-shows)
‚Ä¢ Feedback sentiment (positive, neutral, negative)

**Context Engineering** = Deciding what information to include, how to format it, and how to prioritize it. Too little context = poor decisions. Too much = AI gets confused. Balance is key!`,

            // Jasmine's responses
            deployment: `Production deployment is completely different from lab testing. Here's our staged rollout:

**Phase 1: Pilot (Week 1)**
‚Ä¢ Deploy to 500 customers (5% of at-risk population)
‚Ä¢ AI agent fully automated
‚Ä¢ Human team monitors ALL interactions
‚Ä¢ Goal: Catch bugs without large-scale damage

**Phase 2: A/B Test (Weeks 2-4)**
Three groups of 2,000 customers each:
‚Ä¢ **Group A (Control):** No intervention - baseline churn rate
‚Ä¢ **Group B (AI Only):** Fully automated AI agent
‚Ä¢ **Group C (Human+AI):** AI recommends, human approves

Measure: Churn rate, cost per save, customer satisfaction

**Phase 3: Gradual Rollout (Weeks 5-8)**
‚Ä¢ If AI performs well, increase from 500 ‚Üí 2,000 ‚Üí 5,000 ‚Üí all customers
‚Ä¢ Monitor metrics at each stage
‚Ä¢ Keep human escalation path active

**Phase 4: Full Production (Week 9+)**
‚Ä¢ AI handles 60% fully automated
‚Ä¢ Human-in-the-loop for 30% (high-value customers)
‚Ä¢ Human-only for 10% (VIPs, sensitive cases)

**Why Gradual?** One bug at 500 customers = annoying. Same bug at 50,000 customers = catastrophic!`,

            testing: `A/B testing proves what actually works vs what we think works!

**The Setup:**
We randomly split at-risk customers into groups and try different approaches:

**Group A (Control) - 2,000 customers**
‚Ä¢ No AI intervention
‚Ä¢ Let's see natural churn rate as baseline
‚Ä¢ Expected: ~23% churn (460 customers)

**Group B (AI Agent) - 2,000 customers**
‚Ä¢ Fully automated AI outreach
‚Ä¢ No human involvement except escalations
‚Ä¢ Cost: $20/customer √ó 2,000 = $40,000

**Group C (Human+AI) - 2,000 customers**
‚Ä¢ AI generates recommendations
‚Ä¢ Human reviews and approves each action
‚Ä¢ Cost: $45/customer √ó 2,000 = $90,000 (more expensive)

**What We Measure:**
‚Ä¢ **Churn rate:** Which group retains more customers?
‚Ä¢ **Cost per save:** How much did we spend per saved customer?
‚Ä¢ **Customer satisfaction:** NPS scores, feedback sentiment
‚Ä¢ **Time to intervention:** How fast did we act?

**Example Results:**
‚Ä¢ Group A: 23% churn (baseline)
‚Ä¢ Group B: 16% churn (AI agent) ‚Üí 30% improvement
‚Ä¢ Group C: 14% churn (Human+AI) ‚Üí 39% improvement

**The Decision:** Is the extra 9% worth 2.25√ó the cost? Depends on customer lifetime value!`,

            monitoring: `AI models degrade over time. "Set and forget" is a recipe for disaster!

**What We Monitor:**

**1. Model Performance Metrics**
‚Ä¢ Precision/Recall trends (are they dropping?)
‚Ä¢ Prediction distribution (still seeing 23% churn risk?)
‚Ä¢ False positive/negative rates
‚Ä¢ Alert: If accuracy drops below 80%

**2. Data Drift**
‚Ä¢ Are input features changing? (customers behaving differently)
‚Ä¢ Are we seeing new patterns? (economic recession, competitor actions)
‚Ä¢ Feature distribution shifts
‚Ä¢ Alert: If any feature drifts >15% from training data

**3. Agent Performance**
‚Ä¢ Email open rates (are customers engaging?)
‚Ä¢ Conversion rates (are offers working?)
‚Ä¢ Escalation frequency (how often does AI hand off to humans?)
‚Ä¢ Customer feedback sentiment

**4. Business Metrics**
‚Ä¢ Actual churn rate vs predicted
‚Ä¢ ROI tracking (are we still profitable?)
‚Ä¢ Cost per save trending
‚Ä¢ Customer lifetime value impact

**Retraining Schedule:**
‚Ä¢ Minor updates: Weekly (new customer data)
‚Ä¢ Major retraining: Monthly (full model refresh)
‚Ä¢ Emergency retraining: If alerts trigger

**Human Feedback Loop:**
Humans can override AI decisions. Those overrides become new training data to improve the model!`
        };

        // ===== STATE =====
        let currentCharacter = null;
        let conceptsLearned = new Set();
        let visitedExperts = new Set();

        // ===== NAVIGATION =====
        function showCharacters() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('character-selection').classList.remove('hidden');
            renderCharacters();
        }

        function renderCharacters() {
            const grid = document.getElementById('character-grid');
            grid.innerHTML = '';

            Object.values(characters).forEach(char => {
                const card = document.createElement('div');
                card.className = 'glass-card p-6 cursor-pointer';
                card.onclick = () => startChat(char.id);

                const visited = visitedExperts.has(char.id) ? '<span class="text-green-400 ml-2">‚úì</span>' : '';

                card.innerHTML = `
                    <div class="flex items-start gap-4">
                        <div class="character-avatar text-5xl">${char.emoji}</div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold mb-1">${char.name}${visited}</h3>
                            <p class="text-sm mb-2" style="color: var(--primary-blue)">${char.role}</p>
                            <p class="text-sm" style="color: var(--text-muted)">${char.description}</p>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function startChat(charId) {
            currentCharacter = charId;
            visitedExperts.add(charId);
            const char = characters[charId];

            document.getElementById('character-selection').classList.add('hidden');
            document.getElementById('chat-interface').classList.remove('hidden');

            document.getElementById('chat-avatar').textContent = char.emoji;
            document.getElementById('chat-character-name').textContent = char.name;
            document.getElementById('chat-character-role').textContent = char.role;

            document.getElementById('chat-messages').innerHTML = '';
            document.getElementById('learned-concepts').innerHTML = '';

            addMessage(`Hi! I'm ${char.name}. I can help you understand various aspects of our AI project. What would you like to discuss?`, 'character');
            renderTopics(char.topics);
        }

        function backToCharacters() {
            document.getElementById('chat-interface').classList.add('hidden');
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('character-selection').classList.remove('hidden');
            renderCharacters();
        }

        // ===== CHAT =====
        function addMessage(text, type) {
            const container = document.getElementById('chat-messages');
            const bubble = document.createElement('div');
            bubble.className = `chat-bubble ${type}`;
            bubble.innerHTML = text;
            container.appendChild(bubble);
            container.scrollTop = container.scrollHeight;
        }

        function renderTopics(topics) {
            const container = document.getElementById('topics-container');
            container.innerHTML = '';

            topics.forEach(topic => {
                const btn = document.createElement('button');
                btn.className = 'topic-btn w-full';
                btn.textContent = topic.title;
                btn.onclick = () => discussTopic(topic);
                container.appendChild(btn);
            });

            // Add back option
            const backBtn = document.createElement('button');
            backBtn.className = 'btn-secondary w-full mt-4';
            backBtn.textContent = '‚Üê Ask someone else';
            backBtn.onclick = backToCharacters;
            container.appendChild(backBtn);
        }

        function discussTopic(topic) {
            addMessage(topic.title, 'user');

            setTimeout(() => {
                const response = responses[topic.id];
                addMessage(response, 'character');

                topic.concepts.forEach(c => {
                    conceptsLearned.add(c);
                    addConcept(c);
                });

                setTimeout(() => {
                    addMessage("Any other questions I can help with?", 'character');
                }, 1000);
            }, 800);
        }

        function addConcept(concept) {
            const container = document.getElementById('learned-concepts');
            if (container.querySelector(`[data-concept="${concept}"]`)) return;

            const tag = document.createElement('span');
            tag.className = 'concept-tag';
            tag.textContent = concept;
            tag.setAttribute('data-concept', concept);
            container.appendChild(tag);
        }

        // ===== DASHBOARD =====
        function showDashboard() {
            document.getElementById('character-selection').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');

            const conceptsList = document.getElementById('concepts-list');
            conceptsList.innerHTML = '';
            if (conceptsLearned.size === 0) {
                conceptsList.innerHTML = '<p style="color: var(--text-muted)">No concepts learned yet. Start consulting!</p>';
            } else {
                conceptsLearned.forEach(c => {
                    const tag = document.createElement('span');
                    tag.className = 'concept-tag';
                    tag.textContent = `‚úì ${c}`;
                    conceptsList.appendChild(tag);
                });
            }

            const expertsList = document.getElementById('experts-list');
            expertsList.innerHTML = '';
            Object.values(characters).forEach(char => {
                const visited = visitedExperts.has(char.id);
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between p-3 glass-card mb-2';
                div.innerHTML = `
                    <span>${char.emoji} ${char.name}</span>
                    <span class="${visited ? 'text-green-400' : 'text-gray-400'}">${visited ? '‚úì Consulted' : '‚óã Not visited'}</span>
                `;
                expertsList.appendChild(div);
            });
        }

        // Init
        console.log('AI Consultant Simulation loaded');
    </script>
</body>
</html>
